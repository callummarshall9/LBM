<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JSON++: JSON++</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">JSON++
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">JSON++ </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>JSON++ is a <b>self contained</b> Flex/Bison JSON parser for C++11. It parses strings and files in JSON format, and builds an in-memory tree representing the JSON structure. JSON objects are mapped to <code>std::map</code>s, arrays to <code>std::vector</code>s, JSON native types are mapped onto C++ native types. The library also includes printing on streams. Classes exploit move semantics to avoid copying parsed structures around. It doesn't require any additional library (not even <code>libfl</code>).</p>
<h2>Git repository</h2>
<p>A version of this repository (regularly mirrored) is available on <a href="https://github.com/tunnuz/json">GitHub</a>.</p>
<h2>Contributors</h2>
<p>JSON++ is not a personal project anymore, people is constantly writing to me, and sending pull requests to improve it and make it better. I'd like to thank these people by adding them to this <em>Contributors</em> section (in order of contribution).</p>
<ul>
<li><a href="https://bitbucket.org/jleben">Jakob Leben</a></li>
<li><a href="https://bitbucket.org/t-ri">Thomas Rinklin</a></li>
<li><a href="https://bitbucket.org/ldigaspero">Luca Di Gaspero</a></li>
<li><a href="https://bitbucket.org/HelmuthPloner">Helmuth Ploner</a></li>
</ul>
<p>Thanks for your effort fellas.</p>
<h2>Usage</h2>
<pre class="fragment">#include &lt;iostream&gt;
#include "json.hh"

using namespace std;
using namespace JSON;

int main(int argc, char** argv)
{
    // Read JSON from a string
    Value v = parse_string(&lt;your_json_string&gt;);
    cout &lt;&lt; v &lt;&lt; endl;

    // Read JSON from a file
    v = parse_file("&lt;your_json_file&gt;.json");
    cout &lt;&lt; v &lt;&lt; endl;

    // Or build the object manually
    Object obj;

    obj["foo"] = true;
    obj["bar"] = 3;

    Object o;
    o["given_name"] = "John";
    o["family_name"] = "Boags";

    obj["baz"] = o;

    Array a;
    a.push_back(true);
    a.push_back("asia");
    a.push_back("europe");
    a.push_back(55);

    obj["test"] = a;

    cout &lt;&lt; o &lt;&lt; endl;

    return 0;
}
</pre><h2>How to build JSON++</h2>
<p>The project includes a <code>CMakeLists.txt</code> files which allows you to generate build files for most build systems. Just run </p><pre class="fragment">cmake .    
</pre><p>and then </p><pre class="fragment">make
</pre><p>The project generates</p>
<ul>
<li>json.tab.hh,</li>
<li>json.tab.cc, and</li>
<li>lex.yy.cc</li>
</ul>
<p>files from <code>json.l</code> and <code>json.y</code>, then compiles them (and a few other files) into a <code>libjson</code> library, which is finally used to link the <code>test</code> executable. You can use the library in your projects, or use the Flex/Bison files straight away.</p>
<h2>How to build with unit tests</h2>
<p>If you have the cppunit framework (<a href="http://sourceforge.net/projects/cppunit/">http://sourceforge.net/projects/cppunit/</a>) installed on your system, you can make a build with unit tests as follows: </p><pre class="fragment">mkdir build
cd build
cmake .. -DWITH_UNIT_TESTS=ON
make
ctest -V
</pre><p>The usage of an out of source build is strongly advised, since even more files are generated by the CTest testing tool.</p>
<h2>How to build for measuring code coverage</h2>
<p>Specify the <code>Coverage</code> build type as follows: </p><pre class="fragment">cd build
cmake .. -DCMAKE_BUILD_TYPE=Coverage
</pre><p>You can get a code coverage report with <code>gcovr</code> (<a href="http://gcovr.com">http://gcovr.com</a>): </p><pre class="fragment">cd build
gcovr --xml --root .. --exclude "ut/.*" --exclude "test.cc" &gt; coverage.xml
</pre><p>This produces a report in the XML file format, which can be visualized with tools such as the Cobertura plugin for the jenkins continuous integration server.</p>
<h2>How to generate API documentation</h2>
<p>If you have <code>doxygen</code> (<a href="http://www.stack.nl/~dimitri/doxygen/">http://www.stack.nl/~dimitri/doxygen/</a>) installed on your system, an API documentation will be generated automatically as part of <code>make</code>. You can also request its generation explicitly: </p><pre class="fragment">make doc
</pre><p>You will find the documentation in your build directory at <code>./html/index.html</code>.</p>
<h2>Flex/Bison quirks when using C++ classes</h2>
<p>This section is for the ones who got here because they're trying to build stuff with Flex/Bison and C++. This was my first Flex/Bison parser (the main motivation behind its development being that I didn't find a parser for JSON in C++ which didn't require a number of extra libraries, plus I wanted to learn Flex/Bison).</p>
<p>So, for the ones venturing in this world, here's a few things I wish I knew when I set off to write the parser.</p>
<ol type="1">
<li>Every rule of the Bison grammar has a left-hand side, to which the parsed objects (no matter their type), must be assigned. To do this, a <code>union</code> is used. Bison uses the <code>union { ... }</code> rule to declare the types inside the union, which must only contain <b>native C types</b> or <b>pointers</b> to C++ classes,</li>
<li>in case pointers to C++ classes are used in <code>union</code>, classes extending <code>std</code> containers <b>won't work</b>, so you'll need to wrap <code>std</code> stuff in your own classes,</li>
<li>always put a starting rule in the grammar to assign the result of the overall parse to a variable, e.g., <code>json: value { $$ = $1; }</code>,</li>
<li>as a general rule, functions requiring Flex functions, e.g., <code>yy_scan_string</code>, etc., should be defined in the <code>.l</code> file, and their prototypes put in the <code>.y</code> file as well, so that they can be called from the parser's functions,</li>
<li>... (to be continued as I find out more).</li>
</ol>
<h2>Licensing</h2>
<p>This code is distributed under the very permissive MIT License but, if you use it, you might consider referring to the repository. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon May 27 2019 12:06:00 for JSON++ by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
